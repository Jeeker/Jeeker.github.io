<!doctype html>
<!--[if lt IE 7 ]><html class="ie ie9below ie6"><![endif]-->
<!--[if IE 7 ]><html class="ie ie9below ie7"><![endif]-->
<!--[if IE 8 ]><html class="ie ie9below ie8"><![endif]-->
<!--[if IE 9 ]><html class="ie ie9"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html> <!--<![endif]-->
<head>
    <title>PAC Test - Jeeker</title>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" href="http://jeeker.net/assets/images/apple-touch-icon.png"/>
    <link rel="shortcut icon" type="image/x-icon" href="http://jeeker.net/assets/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="http://jeeker.net/assets/style.css?92104" />
    <link rel="alternate" type="application/atom+xml" href="http://jeeker.net/atom.xml" />
    <!-- <link rel='canonical' href="" /> -->
    <meta name="robots" content="index,follow" />
    <!-- <meta name="keywords" content="" /> -->
</head>
<body>

<div id="wrapper">
    <div id="gradient"></div><!-- #gradient -->
    <div id="header">
        <div id="menu">
            <ul>
                <li><a href="http://jeeker.net/"><span>Home</span></a></li>
                <li><a href="http://jeeker.net/projects/"><span>Projects</span></a></li>
                <li><a href="http://jeeker.net/tags/"><span>Tags</span></a></li>
                <li><a href="http://jeeker.net/archives/"><span>Archives</span></a></li>
                <li><a href="http://jeeker.net/atom.xml"><span>Feed</span></a></li>
                <li><a href="http://jeeker.net/about/"><span>About</span></a></li>
            </ul>
        </div>
    </div><!-- ＃header -->

<div id="main">
    <div id="tools-box">
        <ul>
            <li id="tool-search">
                <form action="http://google.com/search" method="get">
                    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
                    <input type="hidden" name="q" value="site:jeeker.net" />
                </form>
            </li>
        </ul>
    </div><!-- #tools-box -->

<div id="container">
    <div id="content" role="main">



<div id="post-68800" class="post post-single post-empty post-publish">
    <div class="entry-head">
        <h1>PAC Test</h1>
        <p class="entry-date" title="2012-12-10 00:00:00">
            <span class="day">10</span>
            <span class="month">Dec</span>
        </p>
    </div><!-- .entry-header -->
    <div class="entry-content">
<!-- content start -->
<!doctype html>
<html>
<head>
    <title>Gen Pac Test</title>
    <meta charset="UTF-8">
    <style type="text/css">
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, "Microsoft YaHei", sans-serif;
            font-size: 16px;
            margin:0 auto;
        }
        #wrapper {
            padding:20px 0 0 0;
        }
        #head {
            width: 600px;
            margin: 0 auto;
            text-align: center;
        }
        #head h1 { font-size: 40px;}
        #content {
            margin: 0 auto;
            padding: 30px;
            width: 600px;
            border:1px solid #ccc;
            border-radius: 5px;
            -webkit-box-shadow: 0px 0px 10px #aaa;
            -moz-box-shadow: 0px 0px 10px #aaa;
            box-shadow: 0px 0px 10px #aaa;
        }
        #content #input {
            margin: 0 30px 30px;
        }
        #content #input div {
            text-align: center;
            margin: 10px 0;
        }
        #content #input input#test-content {
            width: 100%;
            padding:4px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 2px;
        }
        #content #input #input-btn input {
            font-size: 16px;
            font-weight: bold;
            display: inline;
            font-weight:normal;
            padding: 8px 14px;
            margin: 15px 10px 0;
            line-height: 18px;
            color: #333;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            background-color: #f5f5f5;
            border: 1px solid #ccc;
            border-radius: 4px;
            -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
            -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        #content #input #input-btn input:hover {
            color: #333;
            text-decoration: none;
            background-color: #e6e6e6;

            background-position: 0 -15px;
            -webkit-transition: background-position 0.1s linear;
            -moz-transition: background-position 0.1s linear;
            -ms-transition: background-position 0.1s linear;
            -o-transition: background-position 0.1s linear;
            transition: background-position 0.1s linear;
        }
        #content #result {
            margin: 0 10px;
            padding: 10px 5px;
            border-top: 1px solid #ccc;
            font-size: 12px;
            line-height: 120%;
            color: #666;
            display:none;
        }
        #content #result span,
        #content #intro span {
            display: block;
            margin: 0 0 5px 0;
        }
        #content #intro {
            margin: 0 10px;
            padding:10px 5px;
            border-top:1px solid #ccc;
            font-size:12px;
        }
        span.warning {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="head"><h1>GenPac Test</h1></div>
        <div id="content">
            <div id="input">
                <div id="input-content">
                    <input type="text" id="test-content" value="https://twitter.com" />
                </div>
                <div id="input-btn">
                    <input type="submit" id="test-submit" name="test-submit" value="TEST" />
                    <input type="submit" id="batch-test-submit" name="batch-test-submit" value="Batch Test" />
                    <input type="submit" id="clear-submit" name="clear-submit" value="clear" />
                </div>
            </div>  
            <div id="result">
            </div>
            <div id="intro">
                <span>说明: 测试任意网址使用自动代理配置后的情况。</span>
            </div>
        </div>
    </div>
    <script type='text/javascript' src='https://gist.github.com/JinnLynn/5001700/raw/pac.js'></script>
    <script type="text/javascript">
        var isGenPACExist = false;
        var testUrls = [
            'http://www.sina.com',
            'http://www.163.com',
            'http://www.google.com',
            'http://www.google.com.hk',
            'https://docs.google.com',
            'https://twitter.com',
            'http://facebook.com',
            'http://youtube.com'
        ];

        var get = function(id) {
            return document.getElementById(id);
        }

        var append = function(id, c) {
            org = get(id).innerHTML;
            get(id).innerHTML = c + org;
        }

        var shExpMatch = function(text, exp){
            exp = exp.replace(/\.|\*|\?/g, function (m){
                if (m === '.') {
                    return '\\.';
                } else if (m === '*') {
                    return '.*?'
                } else if (m === '?') {
                    return '.';
                }
            });
            //append('result', exp);
            return new RegExp(exp).test(text);
        }

        var testBtnClick = function() {
            var url = get("test-content").value;
            if (url == '') {
                alert('url is empty.');
                return;
            }
            test(url);
        }

        var batchTestBtnClick = function() {
            var l = testUrls.length;
            for (var i = 0; i < l; i++) {
                test(testUrls[i]);
            };
        }

        var clearBtnClick = function() {
            get('result').innerHTML = '';
            get('result').style.display = 'none';
        };

        var test = function(url) {
            if (!isGenPACExist) {
                append('result', '<span class="warning">error: genpac.js is not existed.</span>');
            }
            else
            {
                res = FindProxyForURL(url, '');
                append('result', '<span>' + url + '<br />' + res + '</span>');
            }
            get('result').style.display = 'block';
        }

        try {
            if(typeof(eval(FindProxyForURL))=="function")
                isGenPACExist = true;
        } catch(e) {
            isGenPACExist = false;
        }  

        get("test-submit").onclick = testBtnClick;
        get("batch-test-submit").onclick = batchTestBtnClick;
        get("clear-submit").onclick = clearBtnClick;

        if (!isGenPACExist) {
            append('intro', '<span class="warning">未找到genpac.js，请在生成PAC前将JSVersion设置为true。</span>');
        }
    </script>
</body>
</html>
<!-- content end -->
    </div><!-- .entry-content -->
    <div class="entry-meta">
        <ul>
            <li class="entry-author">Posted by JinnLynn</li>
            <li class="entry-categories"> in 
</li>
            <li class="entry-human-time-diff"> on Dec 10, 2012</li>
            <li class="entry-comments">with <a href="http://jeeker.net/pac/index.html#comments">comments</a></li>
        </ul>  
    </div><!-- .entry-meta -->
</div><!-- #post-68800 -->
<div id="comments">
<!-- Duoshuo Comment BEGIN -->
    <div class="ds-thread" data-title="PAC Test"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"jeeker"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';
            ds.async = true;
            ds.src = 'http://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
<!-- Duoshuo Comment END -->
</div><!-- #comments -->   
    </div><!-- #content -->
</div><!-- #container -->

<div id="sidebar">
</div><!-- #sidebar -->

</div><!-- #main -->

<div id="footer">
    <div id="footer-left">
        2012 Powered By <a href="http://jeeker.net/projects/gude/" title="a simple python static website generator">Gude</a>. Code licensed under <a href="http://opensource.org/licenses/MIT">MIT License</a>,
        articles licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
    </div><!-- #footer-left -->
    <div id="footer-right">
    </div><!-- #footer-right -->
</div><!-- #footer -->

</div><!-- #wrapper -->

<!-- print javascript -->
<script type="text/javascript" src="http://jeeker.net/assets/script/action.js?92104"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='http://jeeker.net/assets/script/css3-mediaqueries.js?92104'></script>
<![endif]-->

<script type="text/javascript" src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=1635756822" charset="utf-8"></script>
<script type="text/javascript" src="/assets/additional.js"></script>

<!-- google analytics track code -->
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31118267-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

</body>
</html>